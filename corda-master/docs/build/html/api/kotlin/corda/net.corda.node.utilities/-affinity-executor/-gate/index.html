<HTML>
<HEAD>
<meta charset="UTF-8">
<title>AffinityExecutor.Gate - corda</title>
<link rel="stylesheet" href="../../../../style.css">
</HEAD>
<BODY>
<a href="../../../index.html">corda</a>&nbsp;/&nbsp;<a href="../../index.html">net.corda.node.utilities</a>&nbsp;/&nbsp;<a href="../index.html">AffinityExecutor</a>&nbsp;/&nbsp;<a href=".">Gate</a><br/>
<br/>
<h1>Gate</h1>
<code><span class="keyword">class </span><span class="identifier">Gate</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../index.html"><span class="identifier">AffinityExecutor</span></a></code>
<p>An executor useful for unit tests: allows the current thread to block until a command arrives from another
thread, which is then executed. Inbound closures/commands stack up until they are cleared by looping.</p>
<h3>Parameters</h3>

<p><a name="alwaysQueue"></a>
<code>alwaysQueue</code> - If true, executeASAP will never short-circuit and will always queue up.
<h3>Constructors</h3>
<table>
<tbody>
<tr>
<td>
<a href="-init-.html">&lt;init&gt;</a></td>
<td>
<code><span class="identifier">Gate</span><span class="symbol">(</span><span class="identifier" id="net.corda.node.utilities.AffinityExecutor.Gate$<init>(kotlin.Boolean)/alwaysQueue">alwaysQueue</span><span class="symbol">:</span>&nbsp;<span class="identifier">Boolean</span>&nbsp;<span class="symbol">=</span>&nbsp;false<span class="symbol">)</span></code>
<p>An executor useful for unit tests: allows the current thread to block until a command arrives from another
thread, which is then executed. Inbound closures/commands stack up until they are cleared by looping.</p>
</td>
</tr>
</tbody>
</table>
<h3>Properties</h3>
<table>
<tbody>
<tr>
<td>
<a href="is-on-thread.html">isOnThread</a></td>
<td>
<code><span class="keyword">val </span><span class="identifier">isOnThread</span><span class="symbol">: </span><span class="identifier">Boolean</span></code>
<p>Returns true if the current thread is equal to the thread this executor is backed by.</p>
</td>
</tr>
<tr>
<td>
<a href="task-queue-size.html">taskQueueSize</a></td>
<td>
<code><span class="keyword">val </span><span class="identifier">taskQueueSize</span><span class="symbol">: </span><span class="identifier">Int</span></code></td>
</tr>
</tbody>
</table>
<h3>Functions</h3>
<table>
<tbody>
<tr>
<td>
<a href="execute.html">execute</a></td>
<td>
<code><span class="keyword">fun </span><span class="identifier">execute</span><span class="symbol">(</span><span class="identifier" id="net.corda.node.utilities.AffinityExecutor.Gate$execute(java.lang.Runnable)/command">command</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Runnable.html"><span class="identifier">Runnable</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code></td>
</tr>
<tr>
<td>
<a href="flush.html">flush</a></td>
<td>
<code><span class="keyword">fun </span><span class="identifier">flush</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code>
<p>Run the executor until there are no tasks pending and none executing.</p>
</td>
</tr>
<tr>
<td>
<a href="wait-and-run.html">waitAndRun</a></td>
<td>
<code><span class="keyword">fun </span><span class="identifier">waitAndRun</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code></td>
</tr>
</tbody>
</table>
<h3>Inherited Functions</h3>
<table>
<tbody>
<tr>
<td>
<a href="../check-on-thread.html">checkOnThread</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">checkOnThread</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code>
<p>Throws an IllegalStateException if the current thread is not one of the threads this executor is backed by.</p>
</td>
</tr>
<tr>
<td>
<a href="../execute-a-s-a-p.html">executeASAP</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">executeASAP</span><span class="symbol">(</span><span class="identifier" id="net.corda.node.utilities.AffinityExecutor$executeASAP(kotlin.Function0((kotlin.Unit)))/runnable">runnable</span><span class="symbol">:</span>&nbsp;<span class="symbol">(</span><span class="symbol">)</span>&nbsp;<span class="symbol">-&gt;</span>&nbsp;<span class="identifier">Unit</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code>
<p>If isOnThread() then runnable is invoked immediately, otherwise the closure is queued onto the backing thread.</p>
</td>
</tr>
<tr>
<td>
<a href="../fetch-from.html">fetchFrom</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="symbol">&lt;</span><span class="identifier">T</span><span class="symbol">&gt;</span> <span class="identifier">fetchFrom</span><span class="symbol">(</span><span class="identifier" id="net.corda.node.utilities.AffinityExecutor$fetchFrom(kotlin.Function0((net.corda.node.utilities.AffinityExecutor.fetchFrom.T)))/fetcher">fetcher</span><span class="symbol">:</span>&nbsp;<span class="symbol">(</span><span class="symbol">)</span>&nbsp;<span class="symbol">-&gt;</span>&nbsp;<span class="identifier">T</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">T</span></code>
<p>Runs the given function on the executor, blocking until the result is available. Be careful not to deadlock this
way! Make sure the executor can't possibly be waiting for the calling thread.</p>
</td>
</tr>
</tbody>
</table>
</BODY>
</HTML>
